<!--  All dashboard in this page : super-admin,rm,bo,approval-1,approval-2,finance -->
@extends('layouts.app')
@section('title', 'Dashboard')

@section('breadCrumbs')
	<li><a href="{{ route('home') }}">Home</a></li>
    <li><a href="#">Dashboard</a></li>
@endsection

@section('bread')
	<div class="col-xs-12 col-sm-12">
		<div class="mobile-breadcrumbs-wrapper">
			<ul class="mobile-breadcrumbs-group list-inline">
				<li><a href="{{ route('dashboard') }}">Home</a></li>
				<li><a href="#">Dashboard</a></li>
			</ul>
		</div>
	</div>
@endsection

<!--  All dashboard in this page : super-admin,rm,bo,approval-1,approval-2,finance -->
@section('content')
 @if(Auth::user()->hasRole('super-admin'))
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 no-padding">
				<div class="dashboardItem-group">
					<table class="dashboardTable">
						<tr>
							<td>
								<aside class="dashboardItem">
									<figure>
										<img src="{{ asset('resources/assets/images/dash-icon-1.svg') }}">
										<figcaption>
											<div class="dashboardItem-content">
												<h2 class="title">{{$new_ticket_count}}</h2>
												<p>New Tickets <!-- - {{date('M')}} --></p>
											</div>
											<!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_new_ticket_count}}</span> -->
										</figcaption>
									</figure>
								</aside>
							</td>
							<td>
								<aside class="dashboardItem">
									<figure>
										<img src="{{ asset('resources/assets/images/dash-icon-2.svg') }}">
										<figcaption>
											<div class="dashboardItem-content">
												<h2 class="title">{{$tickets_in_approval}}</h2>
												<p>Tickets In Approval <!-- - {{date('M')}} --></p>
											</div>
											<!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_tickets_in_approval}}</span> -->
										</figcaption>
									</figure>
								</aside>
							</td>
							<td>
								<aside class="dashboardItem">
									<figure>
										<img src="{{ asset('resources/assets/images/dash-icon-3.svg') }}">
										<figcaption>
											<div class="dashboardItem-content">
												<h2 class="title">{{$this_month_invoiced}}</h2>
												<p>Invoiced <!-- - {{date('M')}} --></p>
											</div>
											<!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_invoiced}}</span> -->
										</figcaption>
									</figure>
								</aside>
							</td>
							<td>
								<aside class="dashboardItem">
									<figure>
										<img src="{{ asset('resources/assets/images/dash-icon-4.svg') }}">
										<figcaption>
											<div class="dashboardItem-content">
												<h2 class="title">{{$total_ticket_complete}}</h2>
												<p>Paid Tickets <!-- - {{date('M')}} --></p>
											</div>
											<!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_total_ticket_complete}}</span> -->
										</figcaption>
									</figure>
								</aside>
							</td>
						</tr>
					</table>
				</div>

				<div class="clearfix"></div>
					<div class="legendNav-group">
						<ul class="nav nav-tabs">
						  <li><a data-toggle="tab" href="#monthly">Monthly</a></li>
						  <li class="active"><a data-toggle="tab" href="#yearly">Yearly</a></li>
						</ul>
					</div>

					<div class="tab-content">
					  <div id="monthly" class="tab-pane fade">
					    <div class="paymentChart-wrapper" id="paymentChartMonthly"></div>
					  </div>
					  <div id="yearly" class="tab-pane fade in active">
					    <div class="paymentChart-wrapper" id="paymentChart"></div>
					  </div>
					</div>

				<div class="col-xs-12 col-sm-6">
					<div class="table-responsive tickets-count--table">
						<table class="table">
							<thead>
								<tr>
									<td><strong>Tickets Count</strong></td>
									<td>Today</td>
									<td>This Month</td>
									<td>Last Month</td>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>New Tickets</td>
									<td><label class="yellow">{{$today_new_ticket_count}}</label></td>
									<td><label class="blue">{{$this_month_new_ticket_count}}</label></td>
									<td><label class="cyan">{{$prev_month_new_ticket_count}}</label></td>
								</tr>
								<tr>
									<td>In Approval</td>
									<td><label class="yellow">{{$today_tickets_in_approval}}</label></td>
									<td><label class="blue">{{$this_month_tickets_in_approval}}</label></td>
									<td><label class="cyan">{{$prev_month_tickets_in_approval}}</label></td>
								</tr>
                <tr>
                  <td>Approved</td>
                  <td><label class="yellow">{{$today_tickets_in_approved}}</label></td>
                  <td><label class="blue">{{$tickets_in_approved}}</label></td>
                  <td><label class="cyan">{{$prev_month_tickets_in_approved}}</label></td>
                </tr>
								<tr>
									<td>Invoiced</td>
									<td><label class="yellow">{{$today_tickets_invoiced}}</label></td>
									<td><label class="blue">{{$tickets_invoiced}}</label></td>
									<td><label class="cyan">{{$prev_month_tickets_invoiced}}</label></td>
								</tr>
								<tr>
									<td>Completed</td>
									<td><label class="yellow">{{$today_total_ticket_complete}}</label></td>
									<td><label class="blue">{{$this_month_total_ticket_complete}}</label></td>
									<td><label class="cyan">{{$prev_month_total_ticket_complete}}</label></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-xs-12 col-sm-6">
					<div id="completed_ticket" class="completed-ticket--wrapper"></div>
				</div>
			</div>
		</div>
	</div>

<script>
//var num_days_in_month=new Date("{{date('Y')}}", "{{date('m')}}", 0).getDate();
   //check number of days in month
    var current_day = new Date().getDate();
    var days=[];
      for(var i=0;i<current_day;i++)
    {

        days[i]=i+1;

    }
  //


 //assign values
 var amounts_day = [];
  var final_amounts_day = [];
 @foreach($payment_day as $day => $pay)
     amounts_day["{{$day}}"] = {{$pay}}
 @endforeach

 for(var i in days)
{
  var day=days[i];
  if (typeof(amounts_day[day])=='undefined')
   {

      final_amounts_day[i]=0;

   }
  else
   {
      final_amounts_day[i]=amounts_day[day];

   }
}
//
    Highcharts.chart('paymentChartMonthly', {
      chart: {
        type: 'line'
      },
      xAxis: {
        title: null,
        categories: days
      },
      title: {
        text: 'Payment',
        align: 'left',
        x: 0
      },
      yAxis: {
        min:0,
        title: null,
         allowDecimals: false
      },
      legend: {
        enabled: false
      },
      credits: {
        enabled: false
      },
      series: [{
        name: 'Monthly',
        data: final_amounts_day,//[12,200,300,500,12,200,300,500,12,200,300,500,12,200,300,500,12,200,300,500,12,200,300,500,12,200,300,500,12,200,300],
        color: '#ffc72d',
      }]
    });

//var months;
//var payment = "{{ json_encode($payment) }}";
 //var payment = JSON.parse('{ "json_encode($payment)" }');
 var d = new Date();
var Curr_Year = d.getFullYear();
 var num_month = d.getMonth();
 var months=[];
   var all_months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
for(var i=0;i<=num_month;i++)
{

months[i]=all_months[i];
}

 var amounts = [];
 @foreach($payment as $month => $pay)

 amounts["{{$month}}"] = {{$pay}}
 @endforeach
//alert(amounts);
for(var i in months)
{
  var month=months[i];
  if (typeof(amounts[month])=='undefined')
  {

      amounts[i]=0;
   }
   else
    {
      amounts[i]=amounts[month];
    }
}


  Highcharts.chart('paymentChart', {
      chart: {
        type: 'line',
      },
      xAxis: {
        title: null,
          categories: months,
      },

      title: {
        text: 'Payment',
        align: 'left',
        x: 0
      },

       yAxis: {
        min: 0,
          title: null,
           allowDecimals: false
      },


      legend: {
        enabled: false,
        align: 'right',
        verticalAlign: 'top',
        backgroundColor: '#ff0',
        navigation: {
          activeColor: '#ffffff',
          animation: true,
          inactiveColor: '#f00',
          backgroundColor: '#ff0'
        },
        itemStyle: {
          fontSize: '18px'
        }
      },
      credits: {
        enabled: false
      },

      series: [
        {
          name: 'Yearly',
          data: amounts,//[1, 10, 800, 1600, 1500, 1600, 1200, 1400, 1900,20,30,22],
          color: '#ffc72d',
       }
      ],

      responsive: {
          rules: [{
              condition: {
                  maxWidth: 500
              },
              chartOptions: {
                  legend: {
                       layout: 'horizontal',
                       align: 'center',
                       verticalAlign: 'bottom'
                  }
              }
          }]
      }

  });


 var amounts = [];
 @foreach($completed_ticket_count as $month => $pay)

 amounts["{{$month}}"] = {{$pay}}
 @endforeach
//alert(amounts);
for(var i in months)
{
  var month=months[i];
  if (typeof(amounts[month])=='undefined')
  {

      amounts[i]=0;
   }
   else
    {
      amounts[i]=amounts[month];
    }
}



     Highcharts.chart('completed_ticket', {
      chart: {
          type: 'column',
      },
      credits: {
        enabled: false
      },
      title: {
          text: 'Completed Ticket Count',
          align: 'left',
          style: {
            border: '1px solid red',
          }
      },
      legend: {
        enabled: false,
      },
      subtitle: null,
      xAxis: {
          categories: months,//['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: null,
           allowDecimals: false
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y}</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
          column: {
              pointPadding: 0.2,
              borderWidth: 0
          },
          series: {
            pointWidth: 4,
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                  [0, '#003399'],
                  [1, '#3366AA']
              ]
            }
          }
      },
      series: [{
          name: 'Completed Tickets',
          data: amounts,//[49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
          color: '#ffcb2c',
          lineWidth: 2
      }]
  });

</script>

  @endif
@if(Auth::user()->hasRole('rm'))
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 no-padding">
        <div class="dashboardItem-group">
          <table class="dashboardTable">
            <tr>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-1.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$new_ticket_count}}</h2>
                        <p>New Tickets</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_new_ticket_count}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>

              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-2.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$month_ticket_Approved}}</h2>
                        <p>Tickets Approved</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_ticket_Approved}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>
             <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-4.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$month_ticket_rejected}}</h2>
                        <p>Tickets Holded</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_ticket_rejected}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>
            </tr>
          </table>
        </div>


  <div class="col-xs-12 col-sm-6">
          <div class="table-responsive tickets-count--table">
            <table class="table">
              <thead>
                <tr>
                  <td><strong>Tickets Count</strong></td>
                  <td>Today</td>
                  <td>This Month</td>
                  <td>Last Month</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>New Tickets</td>
                  <td><label class="yellow">{{$today_new_ticket_count}}</label></td>
                  <td><label class="blue">{{$new_ticket_count}}</label></td>
                  <td><label class="cyan">{{$prev_month_new_ticket_count}}</label></td>
                </tr>
                <tr>
                  <td>Approved</td>
                  <td><label class="yellow">{{$today_ticket_Approved}}</label></td>
                  <td><label class="blue">{{$month_ticket_Approved}}</label></td>
                  <td><label class="cyan">{{$prev_month_ticket_Approved}}</label></td>
                </tr>


                <tr>
                  <td>Holded</td>
                  <td><label class="yellow">{{$today_ticket_rejected}}</label></td>
                  <td><label class="blue">{{$month_ticket_rejected}}</label></td>
                  <td><label class="cyan">{{$prev_month_ticket_rejected}}</label></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-xs-12 col-sm-6">
          <div id="completed_ticket" class="completed-ticket--wrapper"></div>
        </div>
      </div>
    </div>
  </div>
<script>
var d = new Date();
var Curr_Year = d.getFullYear();
 var num_month = d.getMonth();
 var months=[];
   var all_months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
for(var i=0;i<=num_month;i++)
{

months[i]=all_months[i];
}


 var amounts = [];
 @foreach($Approved_ticket_count as $month => $pay)

 amounts["{{$month}}"] = {{$pay}}
 @endforeach
//alert(amounts);
for(var i in months)
{
  var month=months[i];
  if (typeof(amounts[month])=='undefined')
  {

      amounts[i]=0;
   }
   else
    {
      amounts[i]=amounts[month];
    }
}



     Highcharts.chart('completed_ticket', {
      chart: {
          type: 'column',
      },
      credits: {
        enabled: false
      },
      title: {
          text: 'Approved Ticket Count',
          align: 'left',
          style: {
            border: '1px solid red',
          }
      },
      legend: {
        enabled: false,
      },
      subtitle: null,
      xAxis: {
          categories: months,//['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: null,
           allowDecimals: false
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
          column: {
              pointPadding: 0.2,
              borderWidth: 0
          },
          series: {
            pointWidth: 4,
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                  [0, '#003399'],
                  [1, '#3366AA']
              ]
            }
          }
      },
      series: [{
          name: 'Approved Tickets',
          data: amounts,//[49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
          color: '#ffcb2c',
          lineWidth: 2
      }]
  }); </script>

@endif
@if(Auth::user()->hasRole('bo'))

<div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 no-padding">
        <div class="dashboardItem-group">
          <table class="dashboardTable">
            <tr>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-1.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$current_new_ticket}}</h2>
                        <p>New Tickets</p>
                      </div>
                      <!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$previous_new_ticket}}</span> -->
                    </figcaption>
                  </figure>
                </aside>
              </td>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-2.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$current_waiting_approval}}</h2>
                        <p>Waiting for Approval</p>
                      </div>
                      <!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$previous_waiting_approval}}</span> -->
                    </figcaption>
                  </figure>
                </aside>
              </td>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-3.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$current_waiting_batch}}</h2>
                        <p>Tickets Waiting for Batch Generation</p>
                      </div>
                      <!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$previous_waiting_batch}}</span> -->
                    </figcaption>
                  </figure>
                </aside>
              </td>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-4.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$current_paid}}</h2>
                        <p>Paid Ticket</p>
                      </div>
                      <!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$previous_paid}}</span> -->
                    </figcaption>
                  </figure>
                </aside>
              </td>
            </tr>
          </table>
        </div>

 <div class="col-xs-12 col-sm-6">
          <div class="table-responsive tickets-count--table">
            <table class="table">
              <thead>
                <tr>
                  <td><strong>Tickets Count</strong></td>
                  <td>Today</td>
                  <td>This Month</td>
                  <td>Last Month</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>New Tickets</td>
                  <td><label class="yellow">{{$today_new_ticket}}</label></td>
                  <td><label class="blue">{{$this_month_new_ticket}}</label></td>
                  <td><label class="cyan">{{$previous_new_ticket}}</label></td>
                </tr>
                <tr>
                  <td>Waiting for Approval</td>
                  <td><label class="yellow">{{$today_waiting_approval}}</label></td>
                  <td><label class="blue">{{$this_month_waiting_approval}}</label></td>
                  <td><label class="cyan">{{$previous_waiting_approval}}</label></td>
                </tr>

               <tr>
                  <td>Waiting for Batch Generation</td>
                  <td><label class="yellow">{{$today_waiting_batch}}</label></td>
                  <td><label class="blue">{{$this_month_waiting_batch}}</label></td>
                  <td><label class="cyan">{{$previous_waiting_batch}}</label></td>
                </tr>

                <tr>
                  <td>Paid Tickets</td>
                  <td><label class="yellow">{{$today_paid}}</label></td>
                  <td><label class="blue">{{$this_month_current_paid}}</label></td>
                  <td><label class="cyan">{{$previous_paid}}</label></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-xs-12 col-sm-6">
          <div id="completed_ticket" class="completed-ticket--wrapper"></div>
        </div>
      </div>
    </div>
  </div>
  <script>
var d = new Date();
var Curr_Year = d.getFullYear();
 var num_month = d.getMonth();
 var months=[];
   var all_months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
for(var i=0;i<=num_month;i++)
{

months[i]=all_months[i];
}

 var amounts = [];
 @foreach($Approved_ticket_count as $month => $pay)

 amounts["{{$month}}"] = {{$pay}}
 @endforeach
//alert(amounts);
for(var i in months)
{
  var month=months[i];
  if (typeof(amounts[month])=='undefined')
  {

      amounts[i]=0;
   }
   else
    {
      amounts[i]=amounts[month];
    }
}



     Highcharts.chart('completed_ticket', {
      chart: {
          type: 'column',
      },
      credits: {
        enabled: false
      },
      title: {
          text: 'Approved Ticket Count',
          align: 'left',
          style: {
            border: '1px solid red',
          }
      },
      legend: {
        enabled: false,
      },
      subtitle: null,
      xAxis: {
          categories: months,//['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: null,
           allowDecimals: false
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y} </b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
          column: {
              pointPadding: 0.2,
              borderWidth: 0
          },
          series: {
            pointWidth: 4,
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                  [0, '#003399'],
                  [1, '#3366AA']
              ]
            }
          }
      },
      series: [{
          name: 'Approved Tickets',
          data: amounts,//[49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
          color: '#ffcb2c',
          lineWidth: 2
      }]
  });
</script>
@endif
@if(Auth::user()->hasRole('approval-1'))
<div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 no-padding">
        <div class="dashboardItem-group">
          <table class="dashboardTable">
            <tr>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-1.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$new_ticket_count}}</h2>
                        <p>New Tickets</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_new_ticket_count}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-2.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$tickets_in_approved}}</h2>
                        <p>Tickets Approved</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_tickets_in_approved}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>

              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-4.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$month_ticket_rejected}}</h2>
                        <p>Ticket Reject</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_ticket_rejected}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>
            </tr>
          </table>
        </div>

 <div class="col-xs-12 col-sm-6">
          <div class="table-responsive tickets-count--table">
            <table class="table">
              <thead>
                <tr>
                  <td><strong>Tickets Count</strong></td>
                  <td>Today</td>
                  <td>This Month</td>
                  <td>Last Month</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>New Tickets</td>
                  <td><label class="yellow">{{$today_new_ticket_count}}</label></td>
                  <td><label class="blue">{{$new_ticket_count}}</label></td>
                  <td><label class="cyan">{{$prev_month_new_ticket_count}}</label></td>
                </tr>
                <tr>
                  <td>Approved</td>
                  <td><label class="yellow">{{$today_tickets_in_approved}}</label></td>
                  <td><label class="blue">{{$tickets_in_approved}}</label></td>
                  <td><label class="cyan">{{$prev_month_tickets_in_approved}}</label></td>
                </tr>



                <tr>
                  <td>Rejected</td>
                  <td><label class="yellow">{{$today_ticket_rejected}}</label></td>
                  <td><label class="blue">{{$month_ticket_rejected}}</label></td>
                  <td><label class="cyan">{{$prev_month_ticket_rejected}}</label></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-xs-12 col-sm-6">
          <div id="completed_ticket" class="completed-ticket--wrapper"></div>
        </div>
      </div>
    </div>
  </div>
  <script>
var d = new Date();
var Curr_Year = d.getFullYear();
 var num_month = d.getMonth();
 var months=[];
   var all_months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
for(var i=0;i<=num_month;i++)
{

months[i]=all_months[i];
}
 var amounts = [];
 @foreach($Approved_ticket_count as $month => $pay)

 amounts["{{$month}}"] = {{$pay}}
 @endforeach
//alert(amounts);
for(var i in months)
{
  var month=months[i];
  if (typeof(amounts[month])=='undefined')
  {

      amounts[i]=0;
   }
   else
    {
      amounts[i]=amounts[month];
    }
}



     Highcharts.chart('completed_ticket', {
      chart: {
          type: 'column',
      },
      credits: {
        enabled: false
      },
      title: {
          text: 'Approved Ticket Count',
          align: 'left',
          style: {
            border: '1px solid red',
          }
      },
      legend: {
        enabled: false,
      },
      subtitle: null,
      xAxis: {
          categories: months,//['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: null,
           allowDecimals: false
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
          column: {
              pointPadding: 0.2,
              borderWidth: 0
          },
          series: {
            pointWidth: 4,
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                  [0, '#003399'],
                  [1, '#3366AA']
              ]
            }
          }
      },
      series: [{
          name: 'Approved Tickets',
          data: amounts,//[49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
          color: '#ffcb2c',
          lineWidth: 2
      }]
  });
</script>
@endif
@if(Auth::user()->hasRole('approval-2'))
<div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 no-padding">
        <div class="dashboardItem-group">
          <table class="dashboardTable">
            <tr>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-1.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$new_batch_count}}</h2>
                        <p>New Batches</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_new_batch_count}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-2.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$month_ticket_Approved}}</h2>
                        <p>Tickets Approved</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_ticket_Approved}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>

              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-4.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$month_ticket_rejected}}</h2>
                        <p>Ticket Reject</p>
                      </div>
                      <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_ticket_rejected}}</span>
                    </figcaption>
                  </figure>
                </aside>
              </td>
            </tr>
          </table>
        </div>

 <div class="col-xs-12 col-sm-6">
          <div class="table-responsive tickets-count--table">
            <table class="table">
              <thead>
                <tr>
                  <td><strong>Batches Count</strong></td>
                  <td>Today</td>
                  <td>This Month</td>
                  <td>Last Month</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>New Batches</td>
                  <td><label class="yellow">{{$today_new_batch_count}}</label></td>
                  <td><label class="blue">{{$new_batch_count}}</label></td>
                  <td><label class="cyan">{{$prev_month_new_batch_count}}</label></td>
                </tr>
                <tr>
                  <td>Approved</td>
                  <td><label class="yellow">{{$today_ticket_Approved}}</label></td>
                  <td><label class="blue">{{$month_ticket_Approved}}</label></td>
                  <td><label class="cyan">{{$prev_month_ticket_Approved}}</label></td>
                </tr>



              <tr>
                  <td>Rejected</td>
                  <td><label class="yellow">{{$today_ticket_rejected}}</label></td>
                  <td><label class="blue">{{$month_ticket_rejected}}</label></td>
                  <td><label class="cyan">{{$prev_month_ticket_rejected}}</label></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-xs-12 col-sm-6">
          <div id="completed_ticket" class="completed-ticket--wrapper"></div>
        </div>
      </div>
    </div>
  </div>
  <script>
 var d = new Date();
var Curr_Year = d.getFullYear();
 var num_month = d.getMonth();
 var months=[];
   var all_months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
for(var i=0;i<=num_month;i++)
{

months[i]=all_months[i];
}
 var amounts = [];
 @foreach($Approved_batch_count as $month => $pay)

 amounts["{{$month}}"] = {{$pay}}
 @endforeach
//alert(amounts);
for(var i in months)
{
  var month=months[i];
  if (typeof(amounts[month])=='undefined')
  {

      amounts[i]=0;
   }
   else
    {
      amounts[i]=amounts[month];
    }
}



     Highcharts.chart('completed_ticket', {
      chart: {
          type: 'column',
      },
      credits: {
        enabled: false
      },
      title: {
          text: 'Approved Batches Count',
          align: 'left',
          style: {
            border: '1px solid red',
          }
      },
      legend: {
        enabled: false,
      },
      subtitle: null,
      xAxis: {
          categories: months,//['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: null,
           allowDecimals: false
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
          column: {
              pointPadding: 0.2,
              borderWidth: 0
          },
          series: {
            pointWidth: 4,
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                  [0, '#003399'],
                  [1, '#3366AA']
              ]
            }
          }
      },
      series: [{
          name: 'Approved Batches',
          data: amounts,//[49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
          color: '#ffcb2c',
          lineWidth: 2
      }]
  });
</script>

@endif
@if(Auth::user()->hasRole('finance'))
<div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 no-padding">
        <div class="dashboardItem-group">
          <table class="dashboardTable">
            <tr>
              <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-1.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$new_batch_count}}</h2>
                        <p>New Batches</p>
                      </div>
                      <!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_new_batch_count}}</span> -->
                    </figcaption>
                  </figure>
                </aside>
              </td>
            <td>
                <aside class="dashboardItem">
                  <figure>
                    <img src="{{ asset('resources/assets/images/dash-icon-4.svg') }}">
                    <figcaption>
                      <div class="dashboardItem-content">
                        <h2 class="title">{{$month_completed_payment_count}}</h2>
                        <p>Payment Completed</p>
                      </div>
                      <!-- <span class="date">{{date('M', strtotime("-1 month"))}} : {{$prev_month_completed_payment_count}}</span> -->
                    </figcaption>
                  </figure>
                </aside>
              </td>
            </tr>
          </table>
        </div>


         <div class="col-xs-12 col-sm-6">
          <div class="table-responsive tickets-count--table">
            <table class="table">
              <thead>
                <tr>
                  <td><strong>Batches Count</strong></td>
                  <td>Today</td>
                  <td>This Month</td>
                  <td>Last Month</td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>New Batches</td>
                  <td><label class="yellow">{{$today_new_batch_count}}</label></td>
                  <td><label class="blue">{{$this_month_new_batch_count}}</label></td>
                  <td><label class="cyan">{{$prev_month_new_batch_count}}</label></td>
                </tr>


                <tr>
                  <td>Payment Completed</td>
                  <td><label class="yellow">{{$today_completed_payment_count}}</label></td>
                  <td><label class="blue">{{$this_month_completed_payment_count}}</label></td>
                  <td><label class="cyan">{{$prev_month_completed_payment_count}}</label></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-xs-12 col-sm-6">
          <div id="completed_ticket" class="completed-ticket--wrapper"></div>
        </div>
      </div>
    </div>
  </div>
 <script>
var d = new Date();
var Curr_Year = d.getFullYear();
 var num_month = d.getMonth();
 var months=[];
   var all_months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
for(var i=0;i<=num_month;i++)
{

months[i]=all_months[i];
}
 var amounts = [];
 @foreach($completed_payment_count as $month => $pay)

 amounts["{{$month}}"] = {{$pay}}
 @endforeach
//alert(amounts);
for(var i in months)
{
  var month=months[i];
  if (typeof(amounts[month])=='undefined')
  {

      amounts[i]=0;
   }
   else
    {
      amounts[i]=amounts[month];
    }
}



     Highcharts.chart('completed_ticket', {
      chart: {
          type: 'column',
      },
      credits: {
        enabled: false
      },
      title: {
          text: 'Completed Payment',
          align: 'left',
          style: {
            border: '1px solid red',
          }
      },
      legend: {
        enabled: false,
      },
      subtitle: null,
      xAxis: {
          categories: months,//['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
          crosshair: true
      },
      yAxis: {
          min: 0,
          title: null,
          allowDecimals: false
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>{point.y}</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
          column: {
              pointPadding: 0.2,
              borderWidth: 0
          },
          series: {
            pointWidth: 4,
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                  [0, '#003399'],
                  [1, '#3366AA']
              ]
            }
          }
      },
      series: [{
          name: 'Completed Payments',
          data: amounts,//[49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
          color: '#ffcb2c',
          lineWidth: 2
      }]
  });
</script>
@endif
@if(isset($no_access))
<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 no-padding">
          <h2>Sorry you don't have permission to access this page..!</h2>
      </div><!-- Coumn -->
    </div><!-- Row -->
  </div><!-- Container Fluid -->
@endif
@endsection